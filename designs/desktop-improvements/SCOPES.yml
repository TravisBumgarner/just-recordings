project: Desktop App Improvements
repo: travisbumgarner/just-recordings
design_file: null  # Scoped from user requirements
scoping_date: 2026-01-20

milestones:
  - number: 12
    title: "3. Shared Styles Package"
    description: Extract theme and style constants from web to shared package for use by both web and desktop apps
    branch:
      working: 69-shared-styles-package
      base: main

  - number: 13
    title: "4. Desktop Menu Bar App"
    description: Convert desktop app to a macOS menu bar app with simplified UI
    branch:
      working: 72-desktop-menu-bar-app
      base: main

tasks:
  - id: 1
    github_issue: 69
    milestone: 12
    title: Add shared styles and theme to shared package
    description: |
      Move the theme configuration and style constants from the web package to
      the shared package so both web and desktop apps can use consistent styling.

      **Files to create in shared package:**
      - `src/styles/styleConsts.ts` - Design tokens (PALETTE, SPACING, FONT_SIZES, etc.)
      - `src/styles/Theme.tsx` - MUI theme configuration with AppThemeProvider
      - `src/styles/index.ts` - Barrel export

      **Package updates:**
      - Add `lodash` dependency (used by Theme.tsx for merge)
      - Add `@mui/material` as peer dependency
      - Add export path for `@just-recordings/shared/styles`
    acceptance_criteria:
      - Create src/styles/styleConsts.ts in shared package with all design tokens
      - Create src/styles/Theme.tsx in shared package with AppThemeProvider component
      - Add lodash dependency to shared package
      - Add @mui/material as peer dependency to shared package
      - Export styles via @just-recordings/shared/styles
    depends_on: []
    effort: 2
    status: completed

  - id: 2
    github_issue: 70
    milestone: 12
    title: Update web app to use shared styles
    description: |
      Update the web app to import theme and style constants from the shared
      package instead of local files. Remove the now-redundant local style files.
    acceptance_criteria:
      - Update imports throughout web app to use @just-recordings/shared/styles
      - Remove local styles/styleConsts.ts (now in shared)
      - Remove or simplify local styles/Theme.tsx
      - Verify dark mode still works correctly
      - All existing tests pass
    depends_on: [1]
    effort: 1
    status: scoped

  - id: 3
    github_issue: 71
    milestone: 12
    title: Update desktop app to use shared theme
    description: |
      Update the desktop app to use the shared theme from the shared package,
      replacing the basic MUI default theme with the full themed version.
    acceptance_criteria:
      - Add @just-recordings/shared dependency to desktop package
      - Update main.tsx to use AppThemeProvider from shared styles
      - Add lodash dependency to desktop package
      - Desktop app renders with consistent theme (grayscale, dark mode)
      - All existing tests pass
    depends_on: [1]
    effort: 1
    status: scoped

  - id: 4
    github_issue: 72
    milestone: 13
    title: Remove Backend Status and Environment displays from desktop
    description: |
      Remove the "Backend Status" and "Environment" sections from the desktop
      Home page. These are development/debug displays not needed in production.

      **Remove from Home.tsx:**
      - Environment section showing Electron/Chrome/Node versions
      - Backend Status section showing connection status
      - Related state, effects, and imports
    acceptance_criteria:
      - Remove Environment section from Home.tsx
      - Remove Backend Status section from Home.tsx
      - Remove healthStatus state and useEffect
      - Remove checkHealth import
      - Remove window.api.getVersions() call
      - Update tests if they reference removed elements
    depends_on: []
    effort: 1
    status: scoped

  - id: 5
    github_issue: 73
    milestone: 13
    title: Convert desktop app to macOS menu bar app
    description: |
      Convert the Electron desktop app from a standard window application to a
      macOS menu bar (tray) application. The app should live in the status bar
      and show a popover window when clicked.

      **Key changes to main/index.ts:**
      - Create Tray with icon
      - Make BrowserWindow frameless (frame: false)
      - Hide from Dock (skipTaskbar: true on macOS)
      - Position window near tray icon on click
      - Toggle window visibility on tray click
      - Smaller window size appropriate for menu bar app
    acceptance_criteria:
      - Create tray icon in macOS status bar
      - Window is frameless (no titlebar)
      - App does not appear in Dock
      - Window positions near tray icon when opened
      - Clicking tray icon toggles window visibility
      - Window size reduced to appropriate menu bar app dimensions
      - App stays running when window is closed
    depends_on: [4]
    effort: 3
    status: scoped
